


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             |.text|, CODE, READONLY
    2 00000000         
    3 00000000 004FFFFF 
                       ONE_SECOND_VAL
                               EQU              0x004FFFFF  ;; Nombre de tours 
                                                            pour une seconde
    4 00000000 000C4000 
                       TIME_FOR_ONE_CM_VAL
                               EQU              0x000C4000  ;; Nombre de tours 
                                                            n�c�ssaires pou
                                                            r parcourir 1cm
    5 00000000 20000000 
                       TRAVEL_DISTANCE_CM_ADR
                               EQU              0x20000000  ;; Distance à parc
                                                            ourir en cm
    6 00000000 20000001 
                       TRAVEL_TIME_IN_CYCLE
                               EQU              0x20000001  ;; Durée du voyage
                                                             en nombre de cycle
                                                            
    7 00000000         
    8 00000000                 ENTRY
    9 00000000                 EXPORT           WAIT_SECOND
   10 00000000                 EXPORT           BLINK_R8_TIME
   11 00000000                 EXPORT           CHECK_BUMPERS_AND_UPDATE_LEDS
   12 00000000                 EXPORT           CHECK_SWITCHES_AND_UPDATE_LEDS
   13 00000000                 EXPORT           BROWSE_ASKED_CM
   14 00000000                 EXPORT           INTERACTIONS_TO_DISTANCE
   15 00000000                 EXPORT           DISTANCE_TO_TIME_IN_CYCLE
   16 00000000                 EXPORT           TRAVEL_TIME_IN_CYCLE
   17 00000000                 EXPORT           WAIT_ASKED_TIME_IN_CYCLE
   18 00000000         
   19 00000000                 IMPORT           BUMPER_DROIT_READSTATE
   20 00000000                 IMPORT           BUMPER_GAUCHE_READSTATE
   21 00000000         
   22 00000000                 IMPORT           LEFT_BUMPER_ST_ADR
   23 00000000                 IMPORT           RIGHT_BUMPER_ST_ADR
   24 00000000         
   25 00000000                 IMPORT           LEFT_BUMPER_CT_ADR
   26 00000000                 IMPORT           RIGHT_BUMPER_CT_ADR
   27 00000000         
   28 00000000                 IMPORT           SWITCH_HAUT_READSTATE
   29 00000000                 IMPORT           SWITCH_BAS_READSTATE
   30 00000000         
   31 00000000                 IMPORT           MOTORS_ON
   32 00000000                 IMPORT           MOTORS_OFF
   33 00000000         
   34 00000000                 IMPORT           LEDs_ON
   35 00000000                 IMPORT           LEDs_OFF
   36 00000000         
   37 00000000                 IMPORT           LED_GAUCHE_ON
   38 00000000                 IMPORT           LED_GAUCHE_OFF
   39 00000000         
   40 00000000                 IMPORT           LED_DROITE_ON
   41 00000000                 IMPORT           LED_DROITE_OFF
   42 00000000         
   43 00000000         WAIT_SECOND                          ;; wait a second
   44 00000000 493E            LDR              r1, =ONE_SECOND_VAL
   45 00000002         wait1



ARM Macro Assembler    Page 2 


   46 00000002 3901            SUBS             r1, #1
   47 00000004 D1FD            BNE              wait1
   48 00000006 4770            BX               LR
   49 00000008         
   50 00000008         WAIT_R5_SECONDS                      ;; wait x second(s)
                                                            , x = r5
   51 00000008 493C            LDR              r1, =ONE_SECOND_VAL
   52 0000000A FB05 F501       MUL              r5, r5, r1
   53 0000000E         
   54 0000000E         wait9
   55 0000000E 3D01            SUBS             r5, #1
   56 00000010 D1FD            BNE              wait9
   57 00000012 4770            BX               LR
   58 00000014         
   59 00000014         DISTANCE_TO_TIME_IN_CYCLE
   60 00000014 F04F 5000       LDR              r0, =TRAVEL_DISTANCE_CM_ADR
   61 00000018 6801            LDR              r1, [r0]
   62 0000001A         
   63 0000001A F44F 2244       MOV              r2, #TIME_FOR_ONE_CM_VAL
   64 0000001E         
   65 0000001E FB01 F102       MUL              r1, r1, r2  ;; give x second(s)
                                                            , x = r8
   66 00000022         
   67 00000022 4B37            LDR              r3, =TRAVEL_TIME_IN_CYCLE
   68 00000024 6019            STR              r1, [r3]
   69 00000026         
   70 00000026 4770            BX               LR
   71 00000028         
   72 00000028         WAIT_ASKED_TIME_IN_CYCLE
   73 00000028 4B35            LDR              r3, =TRAVEL_TIME_IN_CYCLE
   74 0000002A 6019            STR              r1, [r3]
   75 0000002C         maloop
   76 0000002C 3901            SUBS             r1, #1
   77 0000002E D1FD            BNE              maloop
   78 00000030         
   79 00000030         WAIT_R5_CYCLES
   80 00000030         wait_cycles                          ;; d�compteur
   81 00000030 3D01            subs             r5, #1
   82 00000032 D1FD            bne              wait_cycles
   83 00000034 4770            BX               LR
   84 00000036         BROWSE_ASKED_CM
   85 00000036 B500            PUSH             {LR}
   86 00000038 F04F 5500       LDR              r5, =TRAVEL_DISTANCE_CM_ADR
   87 0000003C 682D            LDR              r5, [r5]
   88 0000003E F7FF FFE3       BL               WAIT_R5_SECONDS
   89 00000042 F85D EB04       POP              {LR}
   90 00000046         
   91 00000046         INTERACTIONS_TO_DISTANCE
   92 00000046 F04F 5000       LDR              r0, =TRAVEL_DISTANCE_CM_ADR
   93 0000004A         
   94 0000004A 492E            LDR              r1, =LEFT_BUMPER_CT_ADR
   95 0000004C 680A            LDR              r2, [r1]
   96 0000004E F04F 0305       MOV              r3, #0x05
   97 00000052 FB02 F403       MUL              r4, r2, r3  ;; left bumper clic
                                                             add 5 seconds
   98 00000056         
   99 00000056 492C            LDR              r1, =RIGHT_BUMPER_CT_ADR
  100 00000058 680A            LDR              r2, [r1]
  101 0000005A F04F 0301       MOV              r3, #0x01



ARM Macro Assembler    Page 3 


  102 0000005E FB02 F503       MUL              r5, r2, r3  ;; right bumper cli
                                                            c add 5 seconds
  103 00000062 442C            ADD              r4, r4, r5
  104 00000064 6004            STR              r4, [r0]
  105 00000066 4770            BX               LR
  106 00000068         BLINK_R8_TIME                        ;; blink R8 times
  107 00000068 B500            PUSH             {LR}
  108 0000006A         wait3
  109 0000006A F7FF FFFE       BL               LEDs_ON
  110 0000006E F7FF FFFE       BL               WAIT_SECOND
  111 00000072 F7FF FFFE       BL               LEDs_OFF
  112 00000076 F7FF FFFE       BL               WAIT_SECOND
  113 0000007A         
  114 0000007A F1B8 0801       subs             r8, #1
  115 0000007E D1F4            BNE              wait3
  116 00000080         
  117 00000080 F85D EB04       POP              {LR}
  118 00000084 4770            BX               LR
  119 00000086         
  120 00000086         CHECK_BUMPERS_AND_UPDATE_LEDS
  121 00000086 B500            PUSH             {LR}
  122 00000088 F7FF FFFE       BL               BUMPER_DROIT_READSTATE
  123 0000008C         
  124 0000008C 491F            LDR              r1, =RIGHT_BUMPER_ST_ADR ; Char
                                                            ger l'adresse de RI
                                                            GHT_BUMPER_ST_ADR d
                                                            ans r1
  125 0000008E 680A            LDR              r2, [r1]
  126 00000090         
  127 00000090 2A00            CMP              r2, #0
  128 00000092 D10C            BNE              CHECK_NEXT_BUMPER
  129 00000094         
  130 00000094         ;; sinon éteint led et incrémente r8
  131 00000094 F7FF FFFE       BL               LED_DROITE_OFF ;
  132 00000098 491B            LDR              r1, =RIGHT_BUMPER_CT_ADR
  133 0000009A 680A            LDR              r2, [r1]
  134 0000009C F102 0201       ADD              r2, #0x01
  135 000000A0 600A            STR              r2, [r1]
  136 000000A2         
  137 000000A2         ;; délai de sécurité pour éviter le spam machine
  138 000000A2 F04F 0501       MOV              r5, #1
  139 000000A6 F7FF FFAF       BL               WAIT_R5_SECONDS
  140 000000AA         
  141 000000AA         ;; allumage de la led pour indiquer que l'utilisateur pe
                       ut de nouveau incrémenter
  142 000000AA F7FF FFFE       BL               LED_DROITE_ON ;
  143 000000AE         
  144 000000AE         CHECK_NEXT_BUMPER
  145 000000AE F7FF FFFE       BL               BUMPER_GAUCHE_READSTATE
  146 000000B2         
  147 000000B2 4917            LDR              r1, =LEFT_BUMPER_ST_ADR ; Charg
                                                            er l'adresse de LEF
                                                            T_BUMPER_ST_ADR dan
                                                            s r1
  148 000000B4 680A            LDR              r2, [r1]
  149 000000B6         
  150 000000B6 2A00            CMP              r2, #0
  151 000000B8 D10C            BNE              LEFT_BUMPER_NOT_PRESSED
  152 000000BA         



ARM Macro Assembler    Page 4 


  153 000000BA         ;; sinon éteint led et incrémente r8
  154 000000BA F7FF FFFE       BL               LED_GAUCHE_OFF ;
  155 000000BE 4911            LDR              r1, =LEFT_BUMPER_CT_ADR
  156 000000C0 680A            LDR              r2, [r1]
  157 000000C2 F102 0201       ADD              r2, #0x01
  158 000000C6 600A            STR              r2, [r1]
  159 000000C8         
  160 000000C8 F04F 0501       MOV              r5, #1
  161 000000CC F7FF FF9C       BL               WAIT_R5_SECONDS
  162 000000D0         
  163 000000D0 F7FF FFFE       BL               LED_GAUCHE_ON ;
  164 000000D4         
  165 000000D4         LEFT_BUMPER_NOT_PRESSED
  166 000000D4 F85D EB04       POP              {LR}
  167 000000D8 4770            BX               LR
  168 000000DA         
  169 000000DA         
  170 000000DA         CHECK_SWITCHES_AND_UPDATE_LEDS
  171 000000DA B500            PUSH             {LR}
  172 000000DC F7FF FFFE       BL               SWITCH_HAUT_READSTATE
  173 000000E0         
  174 000000E0 F1BA 0F00       CMP              r10, #0
  175 000000E4 D1FF            BNE              switch_haut_not_pressed
  176 000000E6         
  177 000000E6         switch_haut_not_pressed
  178 000000E6 F7FF FFFE       BL               SWITCH_BAS_READSTATE
  179 000000EA         
  180 000000EA F1BA 0F00       CMP              r10, #0
  181 000000EE D101            BNE              switch_bas_not_pressed
  182 000000F0         
  183 000000F0 F04F 0901       MOV              r9, #1
  184 000000F4         
  185 000000F4         switch_bas_not_pressed
  186 000000F4 F85D EB04       POP              {LR}
  187 000000F8 4770            BX               LR
  188 000000FA         
  189 000000FA                 END
              00 00 004FFFFF 
              20000001 
              00000000 
              00000000 
              00000000 
              00000000 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M3 --depend=.\ob
jects\utils.d -o.\objects\utils.o -I.\RTE\_Target_1 -IC:\Users\ibmad\AppData\Lo
cal\Arm\Packs\ARM\CMSIS\5.5.1\CMSIS\Core\Include -IC:\Users\ibmad\AppData\Local
\Arm\Packs\Keil\LM3S_DFP\1.1.0\Device\Include --predefine="__EVAL SETA 1" --pre
define="__UVISION_VERSION SETA 528" --predefine="_RTE_ SETA 1" --predefine="LM3
S9B92 SETA 1" --list=.\listings\utils.lst src\Utils.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 1 in file src\Utils.s
   Uses
      None
Comment: .text unused
BLINK_R8_TIME 00000068

Symbol: BLINK_R8_TIME
   Definitions
      At line 106 in file src\Utils.s
   Uses
      At line 10 in file src\Utils.s
Comment: BLINK_R8_TIME used once
BROWSE_ASKED_CM 00000036

Symbol: BROWSE_ASKED_CM
   Definitions
      At line 84 in file src\Utils.s
   Uses
      At line 13 in file src\Utils.s
Comment: BROWSE_ASKED_CM used once
CHECK_BUMPERS_AND_UPDATE_LEDS 00000086

Symbol: CHECK_BUMPERS_AND_UPDATE_LEDS
   Definitions
      At line 120 in file src\Utils.s
   Uses
      At line 11 in file src\Utils.s
Comment: CHECK_BUMPERS_AND_UPDATE_LEDS used once
CHECK_NEXT_BUMPER 000000AE

Symbol: CHECK_NEXT_BUMPER
   Definitions
      At line 144 in file src\Utils.s
   Uses
      At line 128 in file src\Utils.s
Comment: CHECK_NEXT_BUMPER used once
CHECK_SWITCHES_AND_UPDATE_LEDS 000000DA

Symbol: CHECK_SWITCHES_AND_UPDATE_LEDS
   Definitions
      At line 170 in file src\Utils.s
   Uses
      At line 12 in file src\Utils.s
Comment: CHECK_SWITCHES_AND_UPDATE_LEDS used once
DISTANCE_TO_TIME_IN_CYCLE 00000014

Symbol: DISTANCE_TO_TIME_IN_CYCLE
   Definitions
      At line 59 in file src\Utils.s
   Uses
      At line 15 in file src\Utils.s
Comment: DISTANCE_TO_TIME_IN_CYCLE used once
INTERACTIONS_TO_DISTANCE 00000046

Symbol: INTERACTIONS_TO_DISTANCE



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 91 in file src\Utils.s
   Uses
      At line 14 in file src\Utils.s
Comment: INTERACTIONS_TO_DISTANCE used once
LEFT_BUMPER_NOT_PRESSED 000000D4

Symbol: LEFT_BUMPER_NOT_PRESSED
   Definitions
      At line 165 in file src\Utils.s
   Uses
      At line 151 in file src\Utils.s
Comment: LEFT_BUMPER_NOT_PRESSED used once
WAIT_ASKED_TIME_IN_CYCLE 00000028

Symbol: WAIT_ASKED_TIME_IN_CYCLE
   Definitions
      At line 72 in file src\Utils.s
   Uses
      At line 17 in file src\Utils.s
Comment: WAIT_ASKED_TIME_IN_CYCLE used once
WAIT_R5_CYCLES 00000030

Symbol: WAIT_R5_CYCLES
   Definitions
      At line 79 in file src\Utils.s
   Uses
      None
Comment: WAIT_R5_CYCLES unused
WAIT_R5_SECONDS 00000008

Symbol: WAIT_R5_SECONDS
   Definitions
      At line 50 in file src\Utils.s
   Uses
      At line 88 in file src\Utils.s
      At line 139 in file src\Utils.s
      At line 161 in file src\Utils.s

WAIT_SECOND 00000000

Symbol: WAIT_SECOND
   Definitions
      At line 43 in file src\Utils.s
   Uses
      At line 9 in file src\Utils.s
      At line 110 in file src\Utils.s
      At line 112 in file src\Utils.s

maloop 0000002C

Symbol: maloop
   Definitions
      At line 75 in file src\Utils.s
   Uses
      At line 77 in file src\Utils.s
Comment: maloop used once
switch_bas_not_pressed 000000F4




ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

Symbol: switch_bas_not_pressed
   Definitions
      At line 185 in file src\Utils.s
   Uses
      At line 181 in file src\Utils.s
Comment: switch_bas_not_pressed used once
switch_haut_not_pressed 000000E6

Symbol: switch_haut_not_pressed
   Definitions
      At line 177 in file src\Utils.s
   Uses
      At line 175 in file src\Utils.s
Comment: switch_haut_not_pressed used once
wait1 00000002

Symbol: wait1
   Definitions
      At line 45 in file src\Utils.s
   Uses
      At line 47 in file src\Utils.s
Comment: wait1 used once
wait3 0000006A

Symbol: wait3
   Definitions
      At line 108 in file src\Utils.s
   Uses
      At line 115 in file src\Utils.s
Comment: wait3 used once
wait9 0000000E

Symbol: wait9
   Definitions
      At line 54 in file src\Utils.s
   Uses
      At line 56 in file src\Utils.s
Comment: wait9 used once
wait_cycles 00000030

Symbol: wait_cycles
   Definitions
      At line 80 in file src\Utils.s
   Uses
      At line 82 in file src\Utils.s
Comment: wait_cycles used once
20 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

ONE_SECOND_VAL 004FFFFF

Symbol: ONE_SECOND_VAL
   Definitions
      At line 3 in file src\Utils.s
   Uses
      At line 44 in file src\Utils.s
      At line 51 in file src\Utils.s

TIME_FOR_ONE_CM_VAL 000C4000

Symbol: TIME_FOR_ONE_CM_VAL
   Definitions
      At line 4 in file src\Utils.s
   Uses
      At line 63 in file src\Utils.s
Comment: TIME_FOR_ONE_CM_VAL used once
TRAVEL_DISTANCE_CM_ADR 20000000

Symbol: TRAVEL_DISTANCE_CM_ADR
   Definitions
      At line 5 in file src\Utils.s
   Uses
      At line 60 in file src\Utils.s
      At line 86 in file src\Utils.s
      At line 92 in file src\Utils.s

TRAVEL_TIME_IN_CYCLE 20000001

Symbol: TRAVEL_TIME_IN_CYCLE
   Definitions
      At line 6 in file src\Utils.s
   Uses
      At line 16 in file src\Utils.s
      At line 67 in file src\Utils.s
      At line 73 in file src\Utils.s

4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

BUMPER_DROIT_READSTATE 00000000

Symbol: BUMPER_DROIT_READSTATE
   Definitions
      At line 19 in file src\Utils.s
   Uses
      At line 122 in file src\Utils.s
Comment: BUMPER_DROIT_READSTATE used once
BUMPER_GAUCHE_READSTATE 00000000

Symbol: BUMPER_GAUCHE_READSTATE
   Definitions
      At line 20 in file src\Utils.s
   Uses
      At line 145 in file src\Utils.s
Comment: BUMPER_GAUCHE_READSTATE used once
LED_DROITE_OFF 00000000

Symbol: LED_DROITE_OFF
   Definitions
      At line 41 in file src\Utils.s
   Uses
      At line 131 in file src\Utils.s
Comment: LED_DROITE_OFF used once
LED_DROITE_ON 00000000

Symbol: LED_DROITE_ON
   Definitions
      At line 40 in file src\Utils.s
   Uses
      At line 142 in file src\Utils.s
Comment: LED_DROITE_ON used once
LED_GAUCHE_OFF 00000000

Symbol: LED_GAUCHE_OFF
   Definitions
      At line 38 in file src\Utils.s
   Uses
      At line 154 in file src\Utils.s
Comment: LED_GAUCHE_OFF used once
LED_GAUCHE_ON 00000000

Symbol: LED_GAUCHE_ON
   Definitions
      At line 37 in file src\Utils.s
   Uses
      At line 163 in file src\Utils.s
Comment: LED_GAUCHE_ON used once
LEDs_OFF 00000000

Symbol: LEDs_OFF
   Definitions
      At line 35 in file src\Utils.s
   Uses
      At line 111 in file src\Utils.s
Comment: LEDs_OFF used once
LEDs_ON 00000000

Symbol: LEDs_ON



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
External symbols

   Definitions
      At line 34 in file src\Utils.s
   Uses
      At line 109 in file src\Utils.s
Comment: LEDs_ON used once
LEFT_BUMPER_CT_ADR 00000000

Symbol: LEFT_BUMPER_CT_ADR
   Definitions
      At line 25 in file src\Utils.s
   Uses
      At line 94 in file src\Utils.s
      At line 155 in file src\Utils.s

LEFT_BUMPER_ST_ADR 00000000

Symbol: LEFT_BUMPER_ST_ADR
   Definitions
      At line 22 in file src\Utils.s
   Uses
      At line 147 in file src\Utils.s
Comment: LEFT_BUMPER_ST_ADR used once
MOTORS_OFF 00000000

Symbol: MOTORS_OFF
   Definitions
      At line 32 in file src\Utils.s
   Uses
      None
Comment: MOTORS_OFF unused
MOTORS_ON 00000000

Symbol: MOTORS_ON
   Definitions
      At line 31 in file src\Utils.s
   Uses
      None
Comment: MOTORS_ON unused
RIGHT_BUMPER_CT_ADR 00000000

Symbol: RIGHT_BUMPER_CT_ADR
   Definitions
      At line 26 in file src\Utils.s
   Uses
      At line 99 in file src\Utils.s
      At line 132 in file src\Utils.s

RIGHT_BUMPER_ST_ADR 00000000

Symbol: RIGHT_BUMPER_ST_ADR
   Definitions
      At line 23 in file src\Utils.s
   Uses
      At line 124 in file src\Utils.s
Comment: RIGHT_BUMPER_ST_ADR used once
SWITCH_BAS_READSTATE 00000000

Symbol: SWITCH_BAS_READSTATE
   Definitions



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
External symbols

      At line 29 in file src\Utils.s
   Uses
      At line 178 in file src\Utils.s
Comment: SWITCH_BAS_READSTATE used once
SWITCH_HAUT_READSTATE 00000000

Symbol: SWITCH_HAUT_READSTATE
   Definitions
      At line 28 in file src\Utils.s
   Uses
      At line 172 in file src\Utils.s
Comment: SWITCH_HAUT_READSTATE used once
16 symbols
376 symbols in table
